<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Versión actualizada a 9.6 -->
    <title>AGVISUAL</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="imagenes/Icon.png">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Prata&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --bg-main: #FDFDFD;
            --text-dark: #1a1a1a;
            --text-light: #f8f9fa;
            --accent: #3a3a3a;
        }
        html { 
            scroll-behavior: smooth; 
        }
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-dark);
            overflow-x: hidden;
        }
        h1, h2, h3, h4, .font-display { 
            font-family: 'Prata', serif; 
            line-height: 1.4; 
        }
        
        /* --- Arquitectura de Transición (Crossfade) --- */
        .page-container { 
            display: none; 
            opacity: 0; 
            transition: opacity 0.5s ease-in-out;
        }
        .page-active { 
            display: block; 
            opacity: 1;
        }
        .page-exiting {
            display: block;
            opacity: 0;
        }
        
        /* --- Animación de carga de imágenes (Fade-in) --- */
        .reveal {
            opacity: 0;
            transition: opacity 1.2s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        .reveal.visible {
            opacity: 1;
        }
        
        /* --- Indicador de carga --- */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-main);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }
        .loader.hidden {
            opacity: 0;
            visibility: hidden;
        }
        .loader-circle {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* --- Header Dinámico Mejorado --- */
        #header {
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
            padding-top: 0.5rem; 
            padding-bottom: 0.5rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); /* Sombra sutil permanente */
        }
        #header.header-scrolled, #header.header-light {
            background-color: rgba(253, 253, 253, 0.95);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }
        #header.header-dark {
            background-color: transparent;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15); /* Sombra más visible en fondo transparente */
        }
        #header.header-dark .nav-link-text, #header.header-dark #mobile-menu-button .icon-bar, #header.header-dark .social-icon {
            color: white;
        }
         #header.header-dark .nav-link-underline {
            background-color: white;
        }
         #header.header-dark .logo-dark {
            display: none;
        }
        #header.header-dark .logo-light {
            display: block;
        }
        #header:not(.header-dark) .logo-light {
            display: none;
        }
        #header:not(.header-dark) .logo-dark {
            display: block;
        }
        
        /* --- Menú Móvil Mejorado --- */
        #mobile-menu {
            background-color: rgba(253, 253, 253, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            transform: translateX(100%);
            transition: transform 0.6s cubic-bezier(0.76, 0, 0.24, 1);
        }
        #mobile-menu.open {
            transform: translateX(0);
        }
        .mobile-nav-link {
            font-family: 'Prata', serif;
            color: var(--text-dark);
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.5s ease, transform 0.5s ease;
            position: relative;
        }
        .mobile-nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent);
            transition: width 0.4s ease;
        }
        .mobile-nav-link:hover::after, .mobile-nav-link.nav-active::after {
            width: 100%;
        }
        #mobile-menu-button .icon-bar {
            transition: all 0.3s ease-in-out;
        }
        #mobile-menu-button.open .icon-bar:nth-child(1) { transform: translateY(8px) rotate(45deg); }
        #mobile-menu-button.open .icon-bar:nth-child(2) { opacity: 0; }
        #mobile-menu-button.open .icon-bar:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }
        
        /* --- Estilo para el enlace de navegación activo --- */
        .nav-link.nav-active > .nav-link-underline {
            width: 100%;
        }

        /* --- Galería Mejorada --- */
        .gallery-item { 
            cursor: pointer; 
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            position: relative;
            overflow: hidden;
        }
        .gallery-item:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        .gallery-item img {
            transition: transform 0.8s ease;
        }
        .gallery-item:hover img {
            transform: scale(1.05);
        }
        .gallery-item .overlay { 
            opacity: 0; 
            transition: opacity 0.5s ease; 
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 80%);
        }
        .gallery-item:hover .overlay { 
            opacity: 1; 
        }
        .gallery-item .overlay p {
            transform: translateY(20px);
            transition: transform 0.5s ease;
        }
        .gallery-item:hover .overlay p {
            transform: translateY(0);
        }
        
        /* --- Lightbox Mejorado --- */
        #lightbox { 
            background-color: rgba(10, 10, 10, 0.95); 
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            transition: opacity 0.4s ease-in-out;
        }
        #lightbox-image { 
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1); 
            transform: scale(0.9);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            max-height: 80vh;
        }
        #lightbox.visible #lightbox-image { 
            transform: scale(1); 
        }
        #lightbox-close {
            transition: all 0.3s ease;
        }
        #lightbox-close:hover {
            transform: rotate(90deg);
            color: #ff5252;
        }
        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 101;
        }
        .lightbox-nav:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-50%) scale(1.1);
        }
        #lightbox-prev { left: 20px; }
        #lightbox-next { right: 20px; }
        
        /* --- Contacto y Mapa --- */
        .contact-icon-link { 
            background-color: #f3f4f6; 
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        .contact-icon-link::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background-color: var(--accent);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
            z-index: -1;
        }
        .contact-icon-link:hover::before {
            width: 300px;
            height: 300px;
        }
        .contact-icon-link:hover { 
            color: white; 
            transform: scale(1.1);
        }
        #google-map { 
            filter: grayscale(100%) contrast(90%) brightness(110%); 
            transition: filter 0.5s ease;
        }
        #google-map:hover { 
            filter: grayscale(0%);
        }
        
        /* --- Logos de Marcas --- */
        .client-logo {
            filter: grayscale(100%);
            opacity: 0.6;
            transition: all 0.4s ease;
        }
        .client-logo:hover {
            filter: grayscale(0%);
            opacity: 1;
            transform: scale(1.05);
        }
        
        /* --- Botones y Enlaces Mejorados --- */
        .btn-primary {
            position: relative;
            overflow: hidden;
            z-index: 1;
            transition: all 0.3s ease;
        }
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.2);
            transition: left 0.5s ease;
            z-index: -1;
        }
        .btn-primary:hover::before {
            left: 100%;
        }
        
        /* --- Animación de aparición de texto --- */
        .text-reveal {
            position: relative;
            overflow: hidden;
        }
        .text-reveal::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-main);
            transform: translateX(0);
            transition: transform 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        .text-reveal.revealed::after {
            transform: translateX(101%);
        }
        
        /* --- Efecto parallax suave --- */
        .parallax {
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        /* --- Mejoras de accesibilidad --- */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        /* --- Animación de carga de imágenes con placeholder --- */
        .img-container {
            position: relative;
            overflow: hidden;
            background-color: #f3f4f6;
        }
        .img-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);
            animation: shimmer 1.5s infinite;
            z-index: 1;
        }
        @keyframes shimmer {
            100% { left: 100%; }
        }
        .img-container.loaded::before {
            animation: none;
            opacity: 0;
        }

        /* --- Estilos para la sección de Alquiler (Rediseño) --- */
        .rental-category-btn {
            padding: 0.5rem 1.5rem;
            border: 1px solid #d1d5db; /* gray-300 */
            border-radius: 0; /* Cambio a esquinas cuadradas */
            transition: all 0.3s ease;
            font-weight: 500;
            white-space: nowrap; /* Evita que el texto se parta */
            flex-shrink: 0; 
        }
        .rental-category-btn.active, .rental-category-btn:hover {
            background-color: var(--text-dark);
            color: white;
            border-color: var(--text-dark);
        }
        .rental-card {
            background-color: white;
            border: 1px solid #e5e7eb; /* gray-200 */
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            opacity: 0;
            transform: translateY(20px);
            display: flex;
            flex-direction: column;
        }
         .rental-card.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .rental-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .carousel-container {
            overflow: hidden;
            position: relative;
        }
        .carousel-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .carousel-item {
            min-width: 100%;
        }
        .carousel-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0,0,0,0.4);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .carousel-container:hover .carousel-button {
            opacity: 1;
        }
        .carousel-button:hover {
            background-color: rgba(0,0,0,0.7);
        }
        .carousel-button.prev { left: 10px; }
        .carousel-button.next { right: 10px; }
        
        /* --- Estilos para la nueva sección de Servicios (Reemplazo) --- */
        .service-grid-item {
            background-color: white;
            border: 1px solid #e5e7eb; /* gray-200 */
            border-radius: 0; /* Cambio de rounded-lg a esquinas cuadradas */
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            padding: 2rem;
        }
        .service-grid-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            border-color: var(--accent);
        }
        .service-icon-wrapper {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f3f4f6; /* gray-100 */
            margin-bottom: 1.5rem;
            transition: all 0.4s ease;
        }
        .service-grid-item:hover .service-icon-wrapper {
            background-color: var(--accent);
            transform: rotate(15deg) scale(1.1);
        }
        .service-icon {
            font-size: 2rem;
            color: var(--accent);
            transition: color 0.4s ease;
        }
        .service-grid-item:hover .service-icon {
            color: white;
        }
        .service-grid-item h3 {
            margin-bottom: 0.5rem;
            transition: color 0.4s ease;
        }
    </style>
</head>
<body class="antialiased">
    <!-- Indicador de carga -->
    <div class="loader" id="page-loader">
        <div class="flex flex-col items-center">
            <img src="imagenes/LogoNegro.png" alt="Logo Adán Gómez" class="h-[15rem] mb-8 logo-dark" onerror="this.onerror=null;this.src='https://placehold.co/200x64/1a1a1a/ffffff?text=ADAN+GOMEZ';">
            <img src="imagenes/LogoBlanco.png" alt="Logo Adán Gómez" class="h-[15rem] mb-8 logo-light" style="display: none;" onerror="this.onerror=null;this.src='https://placehold.co/200x64/ffffff/1a1a1a?text=ADAN+GOMEZ';">
            <div class="loader-circle"></div>
        </div>
    </div>
    
    <!-- ===== HEADER ===== -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <a href="#" data-target="portfolio" class="nav-link relative group">
                <img src="imagenes/LogoNegro.png" alt="Logo Adán Gómez" class="w-40 lg:w-[250px] h-auto transition-all duration-300 group-hover:scale-105 logo-dark" onerror="this.onerror=null;this.src='https://placehold.co/350x144/1a1a1a/ffffff?text=ADAN+GOMEZ';">
                <img src="imagenes/LogoBlanco.png" alt="Logo Adán Gómez Blanco" class="w-40 lg:w-[250px] h-auto transition-all duration-300 group-hover:scale-105 logo-light" style="display: none;" onerror="this.onerror=null;this.src='https://placehold.co/350x144/ffffff/1a1a1a?text=ADAN+GOMEZ';">
            </a>

            <div class="flex items-center">
                <nav class="hidden lg:flex items-center space-x-8 text-sm uppercase tracking-widest">
                    <a href="#" data-target="portfolio" class="nav-link hover:text-gray-500 transition-colors relative group">
                        <span class="nav-link-text">Portafolio</span>
                        <span class="nav-link-underline absolute bottom-0 left-0 w-0 h-0.5 bg-black transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#" data-target="projects" class="nav-link hover:text-gray-500 transition-colors relative group">
                        <span class="nav-link-text">Proyectos</span>
                        <span class="nav-link-underline absolute bottom-0 left-0 w-0 h-0.5 bg-black transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#" data-target="services" class="nav-link hover:text-gray-500 transition-colors relative group">
                        <span class="nav-link-text">Servicios</span>
                        <span class="nav-link-underline absolute bottom-0 left-0 w-0 h-0.5 bg-black transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#" data-target="rental" class="nav-link hover:text-gray-500 transition-colors relative group">
                        <span class="nav-link-text">Alquiler</span>
                        <span class="nav-link-underline absolute bottom-0 left-0 w-0 h-0.5 bg-black transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#" data-target="about" class="nav-link hover:text-gray-500 transition-colors relative group">
                        <span class="nav-link-text">Quién Soy</span>
                        <span class="nav-link-underline absolute bottom-0 left-0 w-0 h-0.5 bg-black transition-all duration-300 group-hover:w-full"></span>
                    </a>
                    <a href="#" data-target="contact" class="nav-link hover:text-gray-500 transition-colors relative group">
                        <span class="nav-link-text">Contacto</span>
                        <span class="nav-link-underline absolute bottom-0 left-0 w-0 h-0.5 bg-black transition-all duration-300 group-hover:w-full"></span>
                    </a>
                </nav>

                <div class="hidden lg:flex items-center space-x-4 ml-8">
                    <a href="#" aria-label="WhatsApp" class="social-icon text-gray-700 hover:text-black transition-colors"><i class="fab fa-whatsapp fa-lg"></i></a>
                    <a href="#" aria-label="Instagram" class="social-icon text-gray-700 hover:text-black transition-colors"><i class="fab fa-instagram fa-lg"></i></a>
                    <a href="#" aria-label="YouTube" class="social-icon text-gray-700 hover:text-black transition-colors"><i class="fab fa-youtube fa-lg"></i></a>
                </div>

                <button id="mobile-menu-button" class="lg:hidden z-50 w-8 h-6 flex flex-col justify-between ml-6" aria-label="Menú móvil" aria-expanded="false">
                    <span class="block w-full h-0.5 bg-black icon-bar"></span>
                    <span class="block w-full h-0.5 bg-black icon-bar"></span>
                    <span class="block w-full h-0.5 bg-black icon-bar"></span>
                </button>
            </div>
        </div>
    </header>
    <!-- Menú Móvil Overlay (Rediseñado) -->
    <div id="mobile-menu" class="fixed top-0 right-0 w-full h-full z-40 lg:hidden flex flex-col" aria-hidden="true">
        <nav class="flex flex-col justify-center items-center h-full space-y-8 text-3xl flex-grow">
            <a href="#" data-target="portfolio" class="nav-link mobile-nav-link uppercase">Portafolio</a>
            <a href="#" data-target="projects" class="nav-link mobile-nav-link uppercase">Proyectos</a>
            <a href="#" data-target="services" class="nav-link mobile-nav-link uppercase">Servicios</a>
            <a href="#" data-target="rental" class="nav-link mobile-nav-link uppercase">Alquiler</a>
            <a href="#" data-target="about" class="nav-link mobile-nav-link uppercase">Quién Soy</a>
            <a href="#" data-target="contact" class="nav-link mobile-nav-link uppercase">Contacto</a>
        </nav>
        <div class="flex justify-center items-center space-x-6 pb-12">
            <a href="#" aria-label="WhatsApp" class="text-gray-700 hover:text-black transition-colors"><i class="fab fa-whatsapp fa-2x"></i></a>
            <a href="#" aria-label="Instagram" class="text-gray-700 hover:text-black transition-colors"><i class="fab fa-instagram fa-2x"></i></a>
            <a href="#" aria-label="YouTube" class="text-gray-700 hover:text-black transition-colors"><i class="fab fa-youtube fa-2x"></i></a>
        </div>
    </div>
    <main id="main-content">
        <!-- ===== PORTFOLIO PAGE ===== -->
        <section id="portfolio" class="page-container pt-28 md:pt-36 pb-0" aria-label="Portafolio">
            <div class="container mx-auto px-4 sm:px-6">
                <!-- El contenedor de la galería ahora es el elemento principal -->
                <div class="reveal">
                    <div id="portfolio-gallery" class="columns-2 sm:columns-3 lg:columns-4 gap-6 space-y-6">
                        <!-- Las ~200 imágenes se insertan aquí desde JS -->
                    </div>
                </div>
            </div>

            <div class="bg-zinc-700 text-white py-20 mt-24 reveal">
                <div class="container mx-auto px-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                        <div class="aspect-w-16 aspect-h-9 overflow-hidden shadow-xl gallery-item img-container">
                            <img src="https://placehold.co/1280x720/333333/ffffff?text=Cinematic+Wedding+Film" class="w-full h-full object-cover" alt="Cinematic Wedding Film">
                        </div>
                        <div class="aspect-w-16 aspect-h-9 overflow-hidden shadow-xl gallery-item img-container">
                            <img src="https://placehold.co/1280x720/cccccc/333333?text=Branding+Short+Film" class="w-full h-full object-cover" alt="Branding Short Film">
                        </div>
                        <div class="aspect-w-16 aspect-h-9 overflow-hidden shadow-xl gallery-item img-container">
                            <img src="https://placehold.co/1280x720/444444/ffffff?text=Travel+Diary" class="w-full h-full object-cover" alt="Travel Diary">
                        </div>
                        <div class="aspect-w-16 aspect-h-9 overflow-hidden shadow-xl gallery-item img-container">
                            <img src="https://placehold.co/1280x720/bbbbbb/333333?text=Product+Reel" class="w-full h-full object-cover" alt="Product Reel">
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-gray-100 py-20 reveal">
                <div class="container mx-auto px-6">
                    <div class="text-center mb-12">
                         <h2 class="text-4xl font-display text-gray-800 text-reveal">Confianza y Colaboración</h2>
                    </div>
                    <div class="flex justify-center items-center flex-wrap gap-x-12 gap-y-8 max-w-4xl mx-auto">
                        <img src="https://placehold.co/150x80/cccccc/888888?text=MARCA+1" alt="Logo Cliente 1" class="client-logo">
                        <img src="https://placehold.co/150x80/cccccc/888888?text=MARCA+2" alt="Logo Cliente 2" class="client-logo">
                        <img src="https://placehold.co/150x80/cccccc/888888?text=MARCA+3" alt="Logo Cliente 3" class="client-logo">
                        <img src="https://placehold.co/150x80/cccccc/888888?text=MARCA+4" alt="Logo Cliente 4" class="client-logo">
                        <img src="https://placehold.co/150x80/cccccc/888888?text=MARCA+5" alt="Logo Cliente 5" class="client-logo">
                    </div>
                </div>
            </div>
            
            <div class="bg-gray-100 pt-12 pb-24 reveal">
                <div class="container mx-auto px-6 text-center">
                     <div class="text-center mb-12">
                        <h2 class="text-4xl font-display text-gray-800 text-reveal">¿Listo para el Siguiente Paso?</h2>
                        <p class="text-lg text-gray-600 mt-2 text-reveal">Explora mis proyectos o contáctame para empezar a crear.</p>
                    </div>
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                        <a href="#" data-target="projects" class="nav-link btn-primary inline-block bg-black text-white font-bold py-4 px-10 rounded-full text-lg hover:bg-gray-800 transition-transform hover:scale-105 w-full sm:w-auto">Explorar Proyectos</a>
                        <a href="#" data-target="contact" class="nav-link btn-primary inline-block bg-zinc-700 text-white font-bold py-4 px-10 rounded-full text-lg hover:bg-zinc-800 transition-transform hover:scale-105 w-full sm:w-auto">Contactar Ahora</a>
                    </div>
                </div>
            </div>
        </section>
        <!-- ===== PROJECTS PAGE ===== -->
        <section id="projects" class="page-container pt-28 md:pt-36 pb-20 md:pb-24 bg-gray-50" aria-label="Proyectos">
            <div class="container mx-auto px-4 md:px-12">
                <div id="projects-container" class="space-y-20">
                    <!-- Los 7 proyectos se insertan aquí desde JS -->
                </div>
                <div class="text-center mt-24 reveal">
                     <h3 class="text-3xl font-display text-gray-800 text-reveal">¿Listo para crear tu propia historia?</h3>
                    <a href="#" data-target="services" class="nav-link btn-primary mt-8 inline-block bg-black text-white font-bold py-4 px-10 rounded-full text-lg hover:bg-gray-800 transition-transform hover:scale-105">Descubre mis Servicios</a>
                </div>
            </div>
        </section>
        <!-- ===== SERVICES PAGE (REDESIGNED) ===== -->
        <section id="services" class="page-container pt-28 md:pt-36 pb-20 md:pb-24" aria-label="Servicios">
            <div class="container mx-auto px-6">
                <div id="services-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto reveal">
                    <!-- Los servicios se insertan aquí desde JS -->
                </div>
            </div>
        </section>
        <!-- ===== RENTAL PAGE (REDESIGNED) ===== -->
        <section id="rental" class="page-container pt-28 md:pt-36 pb-20 md:pb-24 bg-white" aria-label="Alquiler de Equipo">
            <div class="container mx-auto px-6">
                <div id="rental-filters-wrapper" class="reveal mb-12">
                    <div id="rental-filters" class="flex justify-center flex-wrap gap-4">
                        <!-- Filtros de categoría se insertan aquí -->
                    </div>
                </div>
                <div id="rental-grid-categorized" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Las tarjetas de alquiler se insertan aquí -->
                </div>
            </div>
        </section>
        <!-- ===== ABOUT ME PAGE (REDESIGNED) ===== -->
        <section id="about" class="page-container pt-24 md:pt-32 pb-20 md:pb-24 bg-gray-50" aria-label="Sobre mí">
            <div class="container mx-auto px-6">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center reveal">
                        <div class="relative inline-block">
                            <img src="imagenes/FotoPerfil.png" alt="Adán" class="shadow-xl w-72 h-72 mx-auto mb-8 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/288x288/999999/FFFFFF?text=Ad%C3%A1n';">
                            <div class="absolute inset-0 border-4 border-white border-opacity-30 animate-ping"></div>
                        </div>
                        <p class="text-xl text-gray-700 leading-relaxed max-w-2xl mx-auto italic text-reveal mt-8">"No hago fotos para vivir, vivo para hacer fotos. Mi cámara no es una herramienta, es una extensión de mi curiosidad por el mundo y las historias que la gente tiene que contar."</p>
                    </div>
                    <div class="prose max-w-none lg:prose-lg mx-auto mt-16 text-gray-600 leading-relaxed space-y-8 reveal text-justify">
                        <h3 class="text-3xl font-display text-black !mb-4 text-reveal">Mi Filosofía</h3>
                        <p class="text-reveal">Hola, soy Adán Gómez. Desde que tomé una cámara por primera vez hace más de diez años, me enamoré de la capacidad de congelar un instante y contar una historia sin palabras. Mi estilo se define por la naturalidad, la luz y la emoción. Busco la belleza en lo cotidiano y la autenticidad en cada retrato.</p>
                        <p class="text-reveal">Para mí, la fotografía no es solo técnica, es conexión. Es crear un espacio de confianza donde puedas ser tú mismo, para que juntos podamos crear algo verdaderamente memorable. Mi objetivo es que te veas en mis fotos y no solo reconozcas tu imagen, sino que sientas la emoción de ese momento una y otra vez.</p>
                        
                        <h3 class="text-3xl font-display text-black !mt-16 !mb-4 text-reveal">Mi Proceso Creativo</h3>
                        <p class="text-reveal">Cada proyecto es un viaje colaborativo. Comienza con una conversación, no con una sesión. Me sumerjo en tu visión para entender qué historia queremos contar. Durante la sesión, mi enfoque es crear una atmósfera relajada donde la magia pueda suceder de forma orgánica. Finalmente, en la postproducción, cada imagen es tratada con el mimo de un artesano para asegurar que el resultado final sea atemporal.</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- ===== CONTACT PAGE (REDESIGNED) ===== -->
        <section id="contact" class="page-container pt-28 md:pt-36" aria-label="Contacto">
             <div class="container mx-auto px-6 pb-20 md:pb-24">
                <div class="max-w-3xl mx-auto grid grid-cols-2 md:grid-cols-3 gap-6 text-center reveal">
                    <a href="#" class="contact-icon-link p-8 flex flex-col items-center justify-center">
                        <i class="fab fa-instagram fa-3x mb-3"></i>
                        <span class="font-bold">Instagram</span>
                    </a>
                    <a href="#" class="contact-icon-link p-8 flex flex-col items-center justify-center">
                        <i class="fab fa-whatsapp fa-3x mb-3"></i>
                        <span class="font-bold">WhatsApp</span>
                    </a>
                    <a href="#" class="contact-icon-link p-8 flex flex-col items-center justify-center">
                        <i class="fas fa-envelope fa-3x mb-3"></i>
                        <span class="font-bold">Email</span>
                    </a>
                    <a href="#" class="contact-icon-link p-8 flex flex-col items-center justify-center">
                        <i class="fab fa-facebook-f fa-3x mb-3"></i>
                        <span class="font-bold">Facebook</span>
                    </a>
                    <a href="#" class="contact-icon-link p-8 flex flex-col items-center justify-center">
                        <i class="fab fa-youtube fa-3x mb-3"></i>
                        <span class="font-bold">Youtube</span>
                    </a>
                    <a href="#" class="contact-icon-link p-8 flex flex-col items-center justify-center">
                        <i class="fas fa-phone fa-3x mb-3"></i>
                        <span class="font-bold">Teléfono</span>
                    </a>
                </div>
            </div>
            <div class="container mx-auto px-6 text-center mb-12 reveal">
                <h2 class="text-4xl font-display text-gray-800 text-reveal">Mi Estudio</h2>
                <p class="text-lg text-gray-600 mt-2 text-reveal">Ubicado en el corazón de Coronado, listo para dar vida a tu proyecto.</p>
             </div>
            <div class="reveal">
                <iframe id="google-map" src="https://www.google.com/maps/embed?pb=!1m18!m12!1m3!1d31431.83101261831!2d-84.0101680513672!3d10.023880900000004!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8fa0f3c43dd70743%3A0x18258b381d58552a!2sV%C3%A1squez%20de%20Coronado!5e0!3m2!1ses-419!2scr!4v1722547858413!5m2!1ses-419!2scr" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </section>
        <!-- PROJECT DETAIL PAGES CONTAINER -->
        <div id="project-detail-pages"></div>
        <!-- RENTAL DETAIL PAGES CONTAINER -->
        <div id="rental-detail-pages"></div>
        <!-- SERVICE DETAIL PAGES CONTAINER -->
        <div id="service-detail-pages"></div>
    </main>
    <!-- Lightbox Modal -->
    <div id="lightbox" class="fixed inset-0 z-[100] flex items-center justify-center hidden opacity-0" role="dialog" aria-modal="true" aria-label="Vista ampliada de imagen">
        <button id="lightbox-close" class="absolute top-6 right-6 text-white text-5xl font-light hover:opacity-75 transition-opacity" aria-label="Cerrar vista ampliada">×</button>
        <button id="lightbox-prev" class="lightbox-nav" aria-label="Imagen anterior">
            <i class="fas fa-chevron-left"></i>
        </button>
        <button id="lightbox-next" class="lightbox-nav" aria-label="Imagen siguiente">
            <i class="fas fa-chevron-right"></i>
        </button>
        <div class="text-white text-center absolute bottom-6 left-0 right-0">
            <p id="lightbox-caption" class="text-lg"></p>
        </div>
        <img id="lightbox-image" src="" alt="Vista ampliada" class="max-w-[90vw] max-h-[85vh] shadow-2xl">
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        // --- SELECTORES GLOBALES ---
        const mainContent = document.getElementById('main-content');
        const header = document.getElementById('header');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const allNavLinks = document.querySelectorAll('.nav-link');
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightbox-image');
        const lightboxClose = document.getElementById('lightbox-close');
        const lightboxPrev = document.getElementById('lightbox-prev');
        const lightboxNext = document.getElementById('lightbox-next');
        const lightboxCaption = document.getElementById('lightbox-caption');
        const pageLoader = document.getElementById('page-loader');
        
        // --- DATOS ---
        const categoryColors = {
            bodas: { bg: 'a3b18a', text: '344e41' }, 
            retratos: { bg: 'bc6c25', text: 'fefae0' },
            producto: { bg: '606c38', text: 'dda15e' }, 
            eventos: { bg: '283618', text: 'fefae0' },
            naturaleza: { bg: '588157', text: 'dad7cd' }
        };
        
        const getRandomSize = () => {
            const sizes = ['600x800', '800x600', '600x600', '600x900', '700x500', '600x700'];
            return sizes[Math.floor(Math.random() * sizes.length)];
        };
        
        const generatePortfolioData = (count) => {
            const data = [];
            const categories = Object.keys(categoryColors);
            for (let i = 1; i <= count; i++) {
                const category = categories[i % categories.length];
                const colors = categoryColors[category];
                const size = getRandomSize();
                data.push({
                    src: `https://placehold.co/${size}/${colors.bg}/${colors.text}?text=${category}+${Math.ceil(i/categories.length)}`,
                    title: `${category.charAt(0).toUpperCase() + category.slice(1)} #${Math.ceil(i/categories.length)}`,
                    category: category
                });
            }
            return data;
        };
        
        const portfolioData = generatePortfolioData(200);
        const generateProjectImages = (count, colorTheme) => {
            const images = [];
            for (let i = 0; i < count; i++) {
                const size = getRandomSize();
                images.push(`https://placehold.co/${size}/${colorTheme.bg}/${colorTheme.text}?text=Detalle+${i+1}`);
            }
            return images;
        };
        
        const projectDetails = {
            "project-detail-1": { 
                title: "Boda de Ana y Carlos", 
                description: "Un día mágico en los viñedos de la Toscana.", 
                images: generateProjectImages(30, categoryColors.bodas) 
            },
            "project-detail-2": { 
                title: 'Colección "NEÓN"', 
                description: "Campaña de moda urbana con luces de la ciudad.", 
                images: generateProjectImages(30, {bg: '333333', text: 'E2E2E2'}) 
            },
            "project-detail-3": { 
                title: 'Retrato Corporativo', 
                description: "Sesiones para equipos ejecutivos, enfocadas en profesionalismo.", 
                images: generateProjectImages(30, categoryColors.retratos) 
            },
            "project-detail-4": { 
                title: 'Sabor & Textura', 
                description: "Fotografía de alimentos para restaurantes y marcas.", 
                images: generateProjectImages(30, categoryColors.producto) 
            },
            "project-detail-5": { 
                title: 'Noche de Gala', 
                description: "Cobertura completa de eventos sociales y corporativos.", 
                images: generateProjectImages(30, categoryColors.eventos) 
            },
            "project-detail-6": { 
                title: 'Aventura en la Montaña', 
                description: "Documentando la belleza salvaje de nuestros paisajes.", 
                images: generateProjectImages(30, categoryColors.naturaleza) 
            },
            "project-detail-7": { 
                title: 'Espacios que Inspiran', 
                description: "Fotografía de arquitectura e interiores.", 
                images: generateProjectImages(30, {bg: 'dad7cd', text: '588157'}) 
            }
        };
        
        const projectsData = [
            { id: 1, title: "Boda de Ana y Carlos", img: "https://placehold.co/800x600/a3b18a/344e41?text=Boda", description: "Un día mágico en los viñedos de la Toscana." },
            { id: 2, title: 'Colección "NEÓN"', img: "https://placehold.co/800x600/344e41/a3b18a?text=Moda", description: "Campaña de moda para una marca emergente." },
            { id: 3, title: "Retrato Corporativo", img: "https://placehold.co/800x600/bc6c25/fefae0?text=Corporativo", description: "Sesiones de retrato para equipos ejecutivos." },
            { id: 4, title: "Sabor & Textura", img: "https://placehold.co/800x600/606c38/dda15e?text=Alimentos", description: "Fotografía de alimentos para restaurantes y marcas." },
            { id: 5, title: "Noche de Gala", img: "https://placehold.co/800x600/283618/fefae0?text=Gala", description: "Cobertura completa de eventos sociales y corporativos." },
            { id: 6, "title": "Aventura en la Montaña", img: "https://placehold.co/800x600/588157/dad7cd?text=Aventura", description: "Documentando la belleza salvaje de nuestros paisajes." },
            { id: 7, title: "Espacios que Inspiran", img: "https://placehold.co/800x600/dad7cd/588157?text=Arquitectura", description: "Fotografía de arquitectura e interiores." }
        ];

        const servicesData = [
            { id: 1, title: "Fotografía de Bodas", icon: "fas fa-ring" },
            { id: 2, title: "Retratos y Books", icon: "fas fa-portrait" },
            { id: 3, title: "Producto y Marcas", icon: "fas fa-camera-retro" },
            { id: 4, title: "Producción de Video", icon: "fas fa-video" },
            { id: 5, title: "Fotografía con Dron", icon: "fa-solid fa-helicopter" },
            { id: 6, title: "Álbumes y Libros", icon: "fas fa-book-open" }
        ];

        const serviceDetails = {
            "service-detail-1": {
                title: "Fotografía de Bodas",
                intro: "Más que un evento, tu boda es el primer capítulo de una nueva historia. Mi misión es capturar cada risa, cada lágrima de alegría y cada mirada cómplice con un enfoque artístico y documental, creando un legado visual que atesorarás para siempre.",
                sections: [
                    { 
                        title: "Mi Enfoque Cinematográfico", 
                        content: "Combino la elegancia de la fotografía de bellas artes con la autenticidad del fotoperiodismo. Busco los momentos genuinos, las emociones no posadas. Me muevo discretamente a lo largo del día para documentar la historia tal como sucede, creando imágenes atemporales que cuentan tu verdad."
                    },
                    {
                        title: "¿Qué Incluye el Servicio?",
                        content: "<ul class='list-disc list-inside space-y-2'><li>Reunión de planificación pre-boda.</li><li>Cobertura completa del día, desde los preparativos hasta la fiesta.</li><li>Galería online privada y protegida con contraseña para compartir.</li><li>Entrega de 500+ imágenes editadas en alta resolución.</li><li>Opción de añadir sesiones de compromiso, álbumes de lujo y segundo fotógrafo.</li></ul>"
                    }
                ],
                gallery: generateProjectImages(6, categoryColors.bodas)
            },
            "service-detail-2": {
                title: "Retratos y Books",
                intro: "Un buen retrato es más que una simple imagen; es una declaración de quién eres. Ya sea para tu marca personal, tu perfil profesional o un recuerdo familiar, creo un ambiente de confianza para capturar tu esencia de una manera auténtica y poderosa.",
                sections: [
                    { 
                        title: "Una Sesión a Tu Medida", 
                        content: "Cada sesión de retratos es una colaboración. Antes de disparar, conversamos sobre tus objetivos, tu estilo y la historia que quieres contar. Podemos trabajar en mi estudio para un look clásico y controlado, o en exteriores para aprovechar la luz natural y el entorno, creando imágenes que realmente te representen."
                    },
                    {
                        title: "Tipos de Sesiones",
                        content: "<ul class='list-disc list-inside space-y-2'><li><strong>Marca Personal:</strong> Para emprendedores, ejecutivos y creativos que necesitan una imagen profesional.</li><li><strong>Books para Artistas:</strong> Sesiones para actores, modelos y músicos.</li><li><strong>Familia y Parejas:</strong> Capturando la conexión y el amor en momentos especiales.</li><li><strong>Maternidad:</strong> Celebrando la belleza de la espera.</li></ul>"
                    }
                ],
                gallery: generateProjectImages(6, categoryColors.retratos)
            },
             "service-detail-3": {
                title: "Producto y Marcas",
                intro: "En un mercado saturado, la calidad visual no es una opción, es una necesidad. Produzco imágenes limpias, atractivas y profesionales que elevan la percepción de tu marca y convierten visitantes en clientes.",
                sections: [
                    { 
                        title: "Fotografía que Vende", 
                        content: "Mi proceso se centra en entender tu producto y tu cliente ideal. Planifico cada detalle, desde la iluminación hasta el estilismo, para crear imágenes que no solo muestren tu producto, sino que también comuniquen sus valores y beneficios. El resultado son fotografías que se integran perfectamente en tu e-commerce, redes sociales y campañas de marketing."
                    },
                    {
                        title: "Servicios para Marcas",
                        content: "<ul class='list-disc list-inside space-y-2'><li>Fotografía de producto para e-commerce (fondo blanco/color).</li><li>Fotografía de lifestyle con modelos y en contexto.</li><li>Fotografía publicitaria para campañas.</li><li>Creación de contenido visual para redes sociales.</li></ul>"
                    }
                ],
                gallery: generateProjectImages(6, categoryColors.producto)
            },
            "service-detail-4": {
                title: "Producción de Video",
                intro: "Del guion a la pantalla final, produzco videos cinematográficos que comunican tu mensaje de manera efectiva y emocional. Ya sea un comercial, un video corporativo o un cortometraje, mi enfoque es contar historias que resuenen.",
                sections: [
                    { 
                        title: "Un Proceso Integral", 
                        content: "Manejo todas las fases de la producción: preproducción (conceptualización, guion), producción (rodaje con equipo de cine digital) y postproducción (edición, colorización, sonido). Este enfoque integral asegura una visión cohesiva y un producto final de la más alta calidad."
                    },
                    {
                        title: "Tipos de Producción",
                        content: "<ul class='list-disc list-inside space-y-2'><li>Videos de Marca (Brand Films).</li><li>Comerciales para TV y Redes Sociales.</li><li>Videos Corporativos e Institucionales.</li><li>Documentales y Cortometrajes.</li><li>Videos Musicales.</li></ul>"
                    }
                ],
                gallery: generateProjectImages(6, {bg: '3a3a3a', text: 'fdfdfd'})
            },
            "service-detail-5": {
                title: "Fotografía con Dron",
                intro: "Eleva tu perspectiva y muestra tu proyecto desde un punto de vista imposible de alcanzar desde tierra. Ofrezco fotografía y videografía aérea de alta resolución para realzar la escala, la belleza y el contexto de tu sujeto.",
                sections: [
                    { 
                        title: "Calidad y Seguridad Profesional", 
                        content: "Como piloto certificado, opero con los más altos estándares de seguridad y cumpliendo con toda la normativa vigente. Utilizo drones de última generación equipados con cámaras Hasselblad para garantizar una calidad de imagen excepcional, con colores vivos y un detalle asombroso."
                    },
                    {
                        title: "Aplicaciones Aéreas",
                        content: "<ul class='list-disc list-inside space-y-2'><li><strong>Inmobiliaria:</strong> Muestra propiedades, terrenos y desarrollos desde el aire.</li><li><strong>Eventos:</strong> Captura la magnitud de conciertos, bodas y eventos deportivos.</li><li><strong>Cinematografía:</strong> Tomas aéreas espectaculares para producciones de video.</li><li><strong>Inspección:</strong> Seguimiento de obras y revisión de infraestructuras.</li></ul>"
                    }
                ],
                gallery: generateProjectImages(6, categoryColors.naturaleza)
            },
            "service-detail-6": {
                title: "Álbumes y Libros",
                intro: "Tus fotografías merecen algo más que una pantalla. Diseño y produzco álbumes de lujo y libros de autor que transforman tus recuerdos en una obra de arte tangible, un tesoro familiar que pasará de generación en generación.",
                sections: [
                    { 
                        title: "Artesanía y Calidad de Museo", 
                        content: "Trabajo con los mejores encuadernadores y laboratorios de impresión para asegurar una calidad excepcional. Cada álbum se diseña a medida, contando la historia de tu día de una manera fluida y emotiva. Utilizamos papeles de archivo y materiales de la más alta calidad para garantizar su durabilidad y belleza."
                    },
                    {
                        title: "Opciones de Personalización",
                        content: "<ul class='list-disc list-inside space-y-2'><li>Amplia selección de cubiertas: lino, cuero, madera.</li><li>Grabado personalizado de nombres y fechas.</li><li>Diferentes tamaños y tipos de papel (mate, lustre).</li><li>Cajas de presentación a juego para proteger tu álbum.</li></ul>"
                    }
                ],
                gallery: generateProjectImages(6, categoryColors.bodas)
            },
        };

        const rentalData = {
            "Cámaras": [
                { id: 1, name: "Canon EOS R5", tier: "Alta", description: "Sensor 45MP, video 8K. Ideal para máxima resolución.", long_desc: "La Canon EOS R5 es ideal para profesionales que necesitan la máxima calidad de imagen. Con su sensor de 45MP, grabación de video 8K y un sistema de autoenfoque de vanguardia, es la herramienta perfecta para bodas, retratos y producciones de video.", images: ["https://placehold.co/800x600/333/fff?text=EOS+R5+Front", "https://placehold.co/800x600/444/fff?text=EOS+R5+Back"] },
                { id: 11, name: "Canon EOS R6 Mark II", tier: "Media", description: "Cámara híbrida veloz, 4K/60p. Perfecta para eventos.", long_desc: "Excelente para fotografía de acción y video. Ofrece ráfagas de 40fps, video 4K/60p y un autoenfoque mejorado que sigue a los sujetos con tenacidad.", images: ["https://placehold.co/800x600/333/fff?text=R6+II"] },
                { id: 16, name: "GoPro HERO12 Black", tier: "Baja", description: "Video 5.3K, estabilización HyperSmooth 6.0.", long_desc: "Captura tus aventuras en impresionante video 5.3K. Con estabilización HyperSmooth 6.0 y una construcción resistente al agua, está lista para cualquier desafío.", images: ["https://placehold.co/800x600/333/fff?text=GoPro+12"] }
            ],
            "Lentes": [
                { id: 3, name: "Canon RF 24-70mm f/2.8", tier: "Alta", description: "El zoom estándar profesional por excelencia. Versátil y luminoso.", long_desc: "Un lente versátil y luminoso que cubre desde gran angular hasta teleobjetivo corto. Perfecto para eventos, retratos y viajes, ofreciendo una nitidez excepcional en todo su rango.", images: ["https://placehold.co/800x600/333/fff?text=RF+24-70mm"] },
                { id: 7, name: "Sigma 85mm f/1.4 ART", tier: "Alta", description: "El lente definitivo para retratos con bokeh espectacular.", long_desc: "Con una apertura de f/1.4, este lente produce un bokeh increíblemente suave y una nitidez asombrosa, haciendo que los sujetos resalten de manera espectacular. Disponible para monturas Sony E y Canon EF.", images: ["https://placehold.co/800x600/333/fff?text=Sigma+85mm"] },
                { id: 22, name: "Canon RF 15-35mm f/2.8", tier: "Media", description: "Zoom ultra gran angular para paisajes y arquitectura.", long_desc: "Perfecto para arquitectura, interiores y paisajes espectaculares. Su estabilización de imagen y su apertura f/2.8 lo hacen increíblemente versátil.", images: ["https://placehold.co/800x600/333/fff?text=RF+15-35mm"] }
            ],
            "Estabilización": [
                 { id: 4, name: "DJI Ronin-S", tier: "Alta", description: "Estabilizador de 3 ejes para tomas de cine fluidas.", long_desc: "Consigue tomas cinematográficas y sin vibraciones con el DJI Ronin-S. Compatible con una amplia gama de cámaras, es esencial para producciones de video profesionales.", images: ["https://placehold.co/800x600/333/fff?text=Ronin-S"] },
                 { id: 23, name: "Slider Motorizado Edelkrone", tier: "Media", description: "Crea travellings y timelapses dinámicos con precisión.", long_desc: "Crea travellings y timelapses dinámicos con precisión. Controlable a través de una aplicación móvil para movimientos complejos y repetibles.", images: ["https://placehold.co/800x600/333/fff?text=edelkrone+Slider"] },
                 { id: 9, name: "Trípode Manfrotto 055", tier: "Baja", description: "Trípode de aluminio robusto y estable para todo uso.", long_desc: "Un trípode confiable para fotografía y video. Su columna central de 90° permite ángulos creativos, y su construcción robusta soporta equipos pesados con total seguridad.", images: ["https://placehold.co/800x600/333/fff?text=Manfrotto+055"] }
            ]
        };
        
        // --- FUNCIONES DE RENDERIZADO Y NAVEGACIÓN ---
        const navigateTo = (targetId, isServiceDetail = false) => {
            const currentPage = document.querySelector('.page-active');
            const targetPage = document.getElementById(targetId);
            
            // Control de la apariencia del header
            if (isServiceDetail) {
                header.classList.add('header-dark');
            } else {
                header.classList.remove('header-dark');
            }

            if (!targetPage || currentPage === targetPage) return;

            if (currentPage) {
                currentPage.classList.add('page-exiting');
                currentPage.classList.remove('page-active');
            }

            targetPage.style.display = 'block';
            setTimeout(() => {
                targetPage.classList.add('page-active');
            }, 10);
            
            if (currentPage) {
                setTimeout(() => {
                    currentPage.classList.remove('page-exiting');
                    currentPage.style.display = 'none';
                }, 500);
            }

            let activeTarget = targetId;
             if (targetId.startsWith('project-detail-')) {
                activeTarget = 'projects';
            } else if (targetId.startsWith('rental-detail-')) {
                activeTarget = 'rental';
            } else if (targetId.startsWith('service-detail-')) {
                activeTarget = 'services';
            }
            allNavLinks.forEach(link => {
                link.classList.remove('nav-active');
                if (link.dataset.target === activeTarget) {
                    link.classList.add('nav-active');
                }
            });

            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            observeElements(targetPage);
        };
        
        const renderProjectDetail = (projectId) => {
            const detailContainer = document.getElementById('project-detail-pages');
            const project = projectDetails[projectId];
            if (!project) return;
            
            const imagesHTML = project.images.map(src => `
                <div class="gallery-item break-inside-avoid overflow-hidden relative img-container">
                    <img src="${src}" alt="${project.title}" loading="lazy" class="w-full h-auto object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x600/ff0000/ffffff?text=Error';">
                </div>
            `).join('');
            
            detailContainer.innerHTML = `
                <section id="${projectId}" class="page-container pt-32 md:pt-40 pb-20 md:pb-24 bg-white">
                    <div class="container mx-auto px-6">
                        <div class="max-w-6xl mx-auto">
                            <a href="#" data-target="projects" class="nav-link text-gray-500 hover:text-black transition-colors mb-8 inline-block">
                                <i class="fas fa-arrow-left mr-2"></i> Volver a Proyectos
                            </a>
                            <div class="text-center mb-16 reveal">
                                <h2 class="text-4xl md:text-5xl font-display text-reveal">${project.title}</h2>
                                <p class="text-lg text-gray-600 mt-4 max-w-2xl mx-auto text-reveal text-center">${project.description}</p>
                            </div>
                            <div class="columns-2 md:columns-3 gap-8 space-y-8 reveal">${imagesHTML}</div>
                        </div>
                    </div>
                </section>`;
            
            navigateTo(projectId);
        };

        const renderServiceDetail = (serviceId) => {
            const detailContainer = document.getElementById('service-detail-pages');
            const service = serviceDetails[serviceId];
            if (!service) return;

            const sectionsHTML = service.sections.map(section => `
                <div class="reveal">
                    <h3 class="text-3xl font-display text-black mb-4 text-reveal">${section.title}</h3>
                    <div class="prose max-w-none lg:prose-lg text-gray-600 leading-relaxed text-reveal text-justify">${section.content}</div>
                </div>
            `).join('');

            const galleryHTML = service.gallery.map(src => `
                <div class="gallery-item break-inside-avoid overflow-hidden relative img-container">
                    <img src="${src}" alt="${service.title}" loading="lazy" class="w-full h-auto object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x600/ff0000/ffffff?text=Error';">
                </div>
            `).join('');

            detailContainer.innerHTML = `
                <section id="${serviceId}" class="page-container bg-white">
                     <div class="h-auto md:h-[60vh] bg-zinc-700 flex items-center justify-center text-white pt-32 pb-16 md:pt-0 md:pb-0">
                        <div class="text-center reveal">
                            <h1 class="text-5xl md:text-7xl font-display text-reveal">${service.title}</h1>
                        </div>
                    </div>
                    <div class="container mx-auto px-6 py-20 md:py-24">
                        <div class="max-w-4xl mx-auto">
                             <a href="#" data-target="services" class="nav-link text-gray-500 hover:text-black transition-colors mb-12 inline-block">
                                <i class="fas fa-arrow-left mr-2"></i> Volver a Servicios
                            </a>
                            <div class="reveal">
                                <p class="text-xl text-gray-700 leading-relaxed italic text-center mb-16 text-reveal">${service.intro}</p>
                            </div>
                            <div class="space-y-16">
                                ${sectionsHTML}
                            </div>
                             <div class="mt-20 reveal">
                                <h3 class="text-3xl font-display text-black mb-8 text-center text-reveal">Galería de Muestra</h3>
                                <div class="columns-2 md:columns-3 gap-6 space-y-6">${galleryHTML}</div>
                            </div>
                            <div class="text-center mt-20 reveal">
                                <h3 class="text-3xl font-display text-gray-800 text-reveal">¿Interesado en este servicio?</h3>
                                <a href="#" data-target="contact" class="nav-link btn-primary mt-6 inline-block bg-black text-white font-bold py-4 px-10 rounded-full text-lg hover:bg-gray-800 transition-transform hover:scale-105">Hablemos de tu Proyecto</a>
                            </div>
                        </div>
                    </div>
                </section>
            `;
            navigateTo(serviceId, true);
        };

        const renderRentalDetail = (rentalId) => {
            const detailContainer = document.getElementById('rental-detail-pages');
            
            let item;
            for (const category in rentalData) {
                const found = rentalData[category].find(r => r.id == rentalId.split('-')[2]);
                if (found) {
                    item = found;
                    break;
                }
            }
            
            if (!item) return;

            const carouselItemsHTML = item.images.map(src => `
                <div class="carousel-item">
                    <img src="${src}" alt="${item.name}" class="w-full h-full object-cover">
                </div>
            `).join('');

            detailContainer.innerHTML = `
                <section id="${rentalId}" class="page-container pt-32 md:pt-40 pb-20 md:pb-24 bg-white">
                    <div class="container mx-auto px-6">
                        <div class="max-w-5xl mx-auto">
                            <a href="#" data-target="rental" class="nav-link text-gray-500 hover:text-black transition-colors mb-8 inline-block">
                                <i class="fas fa-arrow-left mr-2"></i> Volver al Catálogo
                            </a>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                                <div class="carousel-container">
                                    <div class="carousel-track">${carouselItemsHTML}</div>
                                    <button class="carousel-button prev"><i class="fas fa-chevron-left"></i></button>
                                    <button class="carousel-button next"><i class="fas fa-chevron-right"></i></button>
                                </div>
                                <div>
                                    <h2 class="text-4xl md:text-5xl font-display mb-4">${item.name}</h2>
                                    <p class="text-gray-600 leading-relaxed text-justify">${item.long_desc}</p>
                                    <a href="#" data-target="contact" class="nav-link btn-primary mt-8 inline-block bg-black text-white font-bold py-3 px-8 rounded-full text-lg hover:bg-gray-800">Contactar para Alquilar</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            `;
            
            navigateTo(rentalId);

            // Carousel Logic
            const track = detailContainer.querySelector('.carousel-track');
            const slides = Array.from(track.children);
            const nextButton = detailContainer.querySelector('.next');
            const prevButton = detailContainer.querySelector('.prev');
            let currentIndex = 0;

            const updateSlidePosition = () => {
                track.style.transform = 'translateX(' + -100 * currentIndex + '%)';
            };

            nextButton.addEventListener('click', () => {
                currentIndex = (currentIndex + 1) % slides.length;
                updateSlidePosition();
            });

            prevButton.addEventListener('click', () => {
                currentIndex = (currentIndex - 1 + slides.length) % slides.length;
                updateSlidePosition();
            });
        };
        
        const renderPortfolio = () => {
            const portfolioGallery = document.getElementById('portfolio-gallery');
            if(portfolioGallery) {
                portfolioGallery.innerHTML = portfolioData.map(item => `
                    <div class="gallery-item break-inside-avoid overflow-hidden relative img-container" data-category="${item.category}">
                        <img src="${item.src}" alt="${item.title}" loading="lazy" class="w-full h-auto object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x600/ff0000/ffffff?text=Error';">
                        <div class="overlay absolute inset-0 flex items-end p-4">
                            <p class="text-white text-lg font-bold">${item.title}</p>
                        </div>
                    </div>
                `).join('');
            }
        };

        const renderServicesGrid = () => {
            const servicesGrid = document.getElementById('services-grid');
            if(servicesGrid) {
                servicesGrid.innerHTML = servicesData.map(service => `
                    <a href="#" data-target="service-detail-${service.id}" class="nav-link service-grid-item items-center justify-center text-center py-12">
                        <div class="service-icon-wrapper">
                            <i class="${service.icon} service-icon"></i>
                        </div>
                        <h3 class="text-2xl font-display text-gray-900">${service.title}</h3>
                    </a>
                `).join('');
            }
        };

        const renderRentalPage = () => {
            const filtersContainer = document.getElementById('rental-filters');
            const gridContainer = document.getElementById('rental-grid-categorized');
            if (!filtersContainer || !gridContainer) return;

            const categories = ['Todo', ...Object.keys(rentalData)];
            filtersContainer.innerHTML = categories.map(cat => `
                <button class="rental-category-btn ${cat === 'Todo' ? 'active' : ''}" data-category="${cat}">${cat}</button>
            `).join('');

            const renderItems = (category) => {
                let itemsToRender = [];
                if (category === 'Todo') {
                    itemsToRender = Object.values(rentalData).flat();
                } else {
                    itemsToRender = rentalData[category];
                }

                // Ordenar por Baja, Media, Alta
                const tierOrder = { "Baja": 1, "Media": 2, "Alta": 3 };
                itemsToRender.sort((a, b) => (tierOrder[a.tier] || 0) - (tierOrder[b.tier] || 0));

                gridContainer.innerHTML = itemsToRender.map(item => `
                    <div class="rental-card reveal">
                         <div class="carousel-container aspect-w-4 aspect-h-3">
                            <div class="carousel-track flex" data-current-index="0">
                                ${item.images.map(src => `<div class="carousel-item flex-shrink-0 w-full"><img src="${src}" alt="${item.name}" class="w-full h-full object-cover"></div>`).join('')}
                            </div>
                            <button class="carousel-button prev rental-carousel-button" data-direction="-1"><i class="fas fa-chevron-left"></i></button>
                            <button class="carousel-button next rental-carousel-button" data-direction="1"><i class="fas fa-chevron-right"></i></button>
                        </div>
                        <div class="p-6 flex flex-col flex-grow">
                            <div class="flex items-baseline">
                                <h3 class="font-display text-2xl">${item.name}</h3>
                                <span class="ml-2 text-xs font-semibold uppercase tracking-wider text-gray-500">(${item.tier})</span>
                            </div>
                            <p class="text-gray-600 text-sm my-4 flex-grow">${item.description}</p>
                            <a href="#" data-target="rental-detail-${item.id}" class="nav-link text-sm font-bold text-black uppercase tracking-wider group inline-block mt-auto">
                                Ver Detalles <span class="block max-w-0 group-hover:max-w-full transition-all duration-500 h-0.5 bg-black"></span>
                            </a>
                        </div>
                    </div>
                `).join('');
                
                const rentalCards = gridContainer.querySelectorAll('.rental-card');
                const cardObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach((entry, index) => {
                        if (entry.isIntersecting) {
                            setTimeout(() => {
                                entry.target.classList.add('visible');
                            }, index * 75);
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });
                rentalCards.forEach(card => cardObserver.observe(card));
            };

            filtersContainer.addEventListener('click', (e) => {
                if (e.target.matches('.rental-category-btn')) {
                    filtersContainer.querySelector('.active').classList.remove('active');
                    e.target.classList.add('active');
                    renderItems(e.target.dataset.category);
                }
            });
             gridContainer.addEventListener('click', function(e) {
                const button = e.target.closest('.rental-carousel-button');
                if (button) {
                    e.preventDefault();
                    e.stopPropagation();

                    const track = button.closest('.carousel-container').querySelector('.carousel-track');
                    const slides = Array.from(track.children);
                    const direction = parseInt(button.dataset.direction);
                    let currentIndex = parseInt(track.dataset.currentIndex);

                    currentIndex += direction;

                    if (currentIndex < 0) {
                        currentIndex = slides.length - 1;
                    } else if (currentIndex >= slides.length) {
                        currentIndex = 0;
                    }

                    track.style.transform = `translateX(-${currentIndex * 100}%)`;
                    track.dataset.currentIndex = currentIndex;
                }
            });


            renderItems('Todo');
        };
        
        const renderProjects = () => {
            const projectsContainer = document.getElementById('projects-container');
            if(projectsContainer) {
                projectsContainer.innerHTML = projectsData.map((project, index) => `
                    <div class="grid grid-cols-1 md:grid-cols-2 items-center reveal">
                        <div class="p-8 ${index % 2 === 0 ? 'md:text-right' : 'md:order-last md:text-left'}">
                            <h3 class="text-4xl font-display mb-4 text-reveal">${project.title}</h3>
                            <p class="text-gray-600 leading-relaxed mb-6 text-reveal">${project.description}</p>
                            <a href="#" data-target="project-detail-${project.id}" class="nav-link text-black font-bold uppercase tracking-widest text-sm group inline-block">
                                Ver Galería Completa <span class="block max-w-0 group-hover:max-w-full transition-all duration-500 h-0.5 bg-black"></span>
                            </a>
                        </div>
                        <div class="overflow-hidden gallery-item img-container h-full">
                            <img src="${project.img}" alt="${project.title}" class="w-full h-full object-cover">
                        </div>
                    </div>
                `).join('');
            }
        };
        
        const observeElements = (container) => {
            if(!container) return;
            
            const revealElements = container.querySelectorAll('.reveal:not(.visible)');
            const revealObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                        
                        const textElements = entry.target.querySelectorAll('.text-reveal:not(.revealed)');
                        textElements.forEach(textEl => {
                            setTimeout(() => {
                                textEl.classList.add('revealed');
                            }, 200);
                        });
                    }
                });
            }, { threshold: 0.1, rootMargin: "0px 0px -50px 0px" });
            
            revealElements.forEach(el => revealObserver.observe(el));
            
            const imgContainers = container.querySelectorAll('.img-container:not(.loaded)');
            const imgObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target.querySelector('img');
                        if (img && img.complete) {
                            entry.target.classList.add('loaded');
                            observer.unobserve(entry.target);
                        } else if (img) {
                            img.addEventListener('load', () => {
                                entry.target.classList.add('loaded');
                                observer.unobserve(entry.target);
                            });
                        }
                    }
                });
            }, { threshold: 0.1 });
            
            imgContainers.forEach(container => imgObserver.observe(container));
        };
        
        // Lightbox mejorado con navegación entre imágenes
        let currentLightboxIndex = 0;
        let lightboxImages = [];
        
        const openLightbox = (src, caption = '', imagesArray = [], index = 0) => {
            lightboxImages = imagesArray;
            currentLightboxIndex = index;
            
            lightboxImage.src = src;
            lightboxCaption.textContent = caption;
            
            lightboxPrev.style.display = imagesArray.length > 1 ? 'flex' : 'none';
            lightboxNext.style.display = imagesArray.length > 1 ? 'flex' : 'none';
            
            lightbox.classList.remove('hidden');
            setTimeout(() => { 
                lightbox.classList.add('visible'); 
                lightbox.classList.remove('opacity-0'); 
            }, 10);
        };
        
        const closeLightbox = () => { 
            lightbox.classList.add('opacity-0'); 
            setTimeout(() => { 
                lightbox.classList.add('hidden'); 
                lightbox.classList.remove('visible'); 
                lightboxImage.src = ''; 
            }, 300); 
        };
        
        const navigateLightbox = (direction) => {
            if (lightboxImages.length === 0) return;
            
            if (direction === 'next') {
                currentLightboxIndex = (currentLightboxIndex + 1) % lightboxImages.length;
            } else {
                currentLightboxIndex = (currentLightboxIndex - 1 + lightboxImages.length) % lightboxImages.length;
            }
            
            const newImage = lightboxImages[currentLightboxIndex];
            lightboxImage.style.opacity = '0';
            
            setTimeout(() => {
                lightboxImage.src = newImage.src;
                lightboxCaption.textContent = newImage.title || '';
                lightboxImage.style.opacity = '1';
            }, 200);
        };
        
        // --- MANEJADORES DE EVENTOS ---
        document.addEventListener('click', function(e) {
            const navLink = e.target.closest('.nav-link');
            if (navLink) {
                e.preventDefault();
                const targetId = navLink.dataset.target;
                if (targetId.startsWith('project-detail-')) {
                    renderProjectDetail(targetId);
                } else if (targetId.startsWith('rental-detail-')) {
                    renderRentalDetail(targetId);
                } else if (targetId.startsWith('service-detail-')) {
                    renderServiceDetail(targetId);
                }
                else {
                    navigateTo(targetId);
                }
                if (mobileMenu.classList.contains('open')) {
                    toggleMobileMenu(false);
                }
            }
            
            const galleryItem = e.target.closest('.gallery-item');
            if(galleryItem) {
                const clickedImg = galleryItem.querySelector('img');
                const allVisibleItems = Array.from(document.querySelectorAll('.page-active .gallery-item'));
                
                const imagesArray = allVisibleItems.map(item => {
                    const img = item.querySelector('img');
                    const itemCaption = item.querySelector('.overlay p')?.textContent || img.alt;
                    return {
                        src: img.src,
                        title: itemCaption
                    };
                });

                const currentIndex = allVisibleItems.indexOf(galleryItem);
                
                openLightbox(clickedImg.src, imagesArray[currentIndex].title, imagesArray, currentIndex);
            }
        });
        
        window.addEventListener('scroll', () => {
            const isServicePage = document.querySelector('.page-active[id^="service-detail-"]');
            
            // Lógica unificada para el scroll
            if (window.scrollY > 50) {
                header.classList.add('header-scrolled');
                header.classList.remove('header-dark');
            } else {
                header.classList.remove('header-scrolled');
                if (isServicePage) {
                    header.classList.add('header-dark');
                }
            }
            
            const parallaxElements = document.querySelectorAll('.parallax');
            parallaxElements.forEach(el => {
                const scrolled = window.pageYOffset;
                const rate = scrolled * -0.2;
                el.style.transform = `translateY(${rate}px)`;
            });
        }, { passive: true });
        
        const toggleMobileMenu = (open) => {
            mobileMenu.classList.toggle('open', open);
            mobileMenuButton.classList.toggle('open', open);
            mobileMenuButton.setAttribute('aria-expanded', open);
            mobileMenu.setAttribute('aria-hidden', !open);
            
            const links = mobileMenu.querySelectorAll('.mobile-nav-link');
            links.forEach((link, index) => {
                setTimeout(() => {
                    link.style.opacity = open ? '1' : '0';
                    link.style.transform = open ? 'translateY(0)' : 'translateY(30px)';
                }, 150 + index * 50);
            });
        };
        
        mobileMenuButton.addEventListener('click', () => {
            const isOpen = mobileMenu.classList.contains('open');
            toggleMobileMenu(!isOpen);
        });
        
        lightboxClose.addEventListener('click', closeLightbox);
        lightbox.addEventListener('click', (e) => { 
            if (e.target === lightbox) closeLightbox(); 
        });
        
        lightboxPrev.addEventListener('click', () => navigateLightbox('prev'));
        lightboxNext.addEventListener('click', () => navigateLightbox('next'));
        
        document.addEventListener('keydown', (e) => {
            if (!lightbox.classList.contains('hidden')) {
                if (e.key === 'Escape') closeLightbox();
                if (e.key === 'ArrowLeft') navigateLightbox('prev');
                if (e.key === 'ArrowRight') navigateLightbox('next');
            }
        });
        
        // --- INICIALIZACIÓN ---
        const initialize = () => {
            renderPortfolio();
            renderProjects();
            renderServicesGrid();
            renderRentalPage();
            
            setTimeout(() => {
                pageLoader.classList.add('hidden');
            }, 2000);
            
            const initialPage = document.getElementById('portfolio');
            if(initialPage) {
                initialPage.classList.add('page-active');
                observeElements(initialPage);
                document.querySelectorAll('.nav-link[data-target="portfolio"]').forEach(link => {
                    link.classList.add('nav-active');
                });
            }
        };
        
        initialize();
    });
    </script>
</body>
</html>


